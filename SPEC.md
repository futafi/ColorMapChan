# カラーマッププロットソフトウェア開発仕様書(カラープロットちゃん）

## 1. プロジェクト概要

本ツールは、MOSFETの低温動作時に発生するクーロンブロッケード現象を分析するための対話型データ可視化アプリケーションです。多次元の電圧パラメータ（VG1, VG2, VB等）に対する電流（ID）のマッピングをヒートマップで表示し、ユーザーが直感的に関心領域を選択・拡大して詳細に観察できるようにします。

## 2. 主要機能要件

### 2.1 データ表示
- 2次元ヒートマップ（カラーマップ）でMOSFETの電流データを可視化
- 表示軸は任意の電圧パラメータから選択可能（VG1, VG2, VB等）
- 基本的な表示範囲は各パラメータの最小電圧〜最大電圧（データに応じて自動調整）
- 電流範囲は測定データに応じて自動調整（手動調整も可能）

### 2.2 多次元データ処理
- 3つ以上のパラメータを含むデータセットに対応
- 表示しない次元（例：VB）の特定値でデータをフィルタリング
- フィルタリング用パラメータの値選択機能（ドロップダウンまたはスライダー）


### 2.3 軸選択と切替機能
- X軸、Y軸に割り当てるパラメータを任意に選択可能
- フィルタリングするパラメータの選択機能
- 軸の入れ替え機能（X軸⇔Y軸）
- 選択に応じた軸ラベルとスケールの動的更新

### 2.4 インタラクティブ操作
- マウスドラッグによる関心領域の選択と自動拡大
- 両方向スライダーによる各軸・電流値の表示範囲の動的調整（上限・下限両方を調整可能）
- ダブルクリックによる元の表示範囲へのリセット
- マウスカーソル位置におけるデータポイントの値をリアルタイム表示

### 2.5 表示オプション
- カラーマップのタイプ選択（Jet, Viridis, Plasma, グレースケール）
- 線形/対数スケールの切り替え
- カラーバーの表示（現在の色と対応する電流値を示す）
- X軸・Y軸の表示（目盛り線と値のラベル付き）

### 2.6 データ入出力
- CSVまたはテキストファイルからのデータ読み込み機能
- その他仕様のデータファイルにも対応するため、読み込み機能を分離
- ヘッダー列の手動認識（任意のパラメータ名に対応するためユーザーが選択）


## 3. 技術仕様

### 3.1 開発フレームワーク
- tkinterを使用したフロントエンドアプリケーション
- matplotlibベースのグラフ描画（高速なデータ処理と描画のため）
- numpyを利用したデータ処理

### 3.2 データ構造と処理
- データ形式：CSVまたはテキストファイル（複数の電圧パラメータと電流値）
- データ構造：柔軟な列構造に対応（必須：少なくとも2つのパラメータと1つの測定値）
- 表示フィルタリング：選択した電圧範囲と非表示次元の値に基づく
- データグループ化：非表示次元の値または値範囲によるグループ化
- スケーリング：線形または対数スケールによる電流値の正規化
- 電流データの絶対値取得：負電流に対応するため、絶対値を取ることが可能（オプション）
- 座標変換：データ値からキャンバス座標への正確なマッピング

### 3.3 UI/UXコンポーネント
- メインヒートマップ表示エリア
- 軸パラメータ選択ドロップダウン（X軸、Y軸、フィルタリング次元）
- フィルタリングパラメータ値選択コントロール（スライダーまたはドロップダウン）
- 両方向スライダー（各軸と電流の範囲調整用）
- ファイル選択/読み込みコントロール
- カラーマップ選択と対数/線形切替オプション
- リアルタイムデータ値表示パネル
- カラーバー（凡例）表示

## 5. 将来的な拡張可能性

- 1次元断面プロットの表示機能（選択した線に沿った電流プロファイル）
- データ、画像のエクスポート機能（選択領域のみ、加工データなど）
- データフィルタリングや平滑化オプション（近傍n点の最小二乗法による平滑化）

## 6. 実装上の注意点

- 大量のデータポイント（>50,000点）がある場合のパフォーマンス最適化
- 多次元データの効率的な処理と索引付け
- 数値精度の管理（科学計測で重要な小さな電流値の適切な表示）
- ユーザビリティ：特に直感的な操作性の維持
