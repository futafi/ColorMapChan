# カラープロットちゃん - アクティブコンテキスト

## 現在の作業状況

基本的なGUIとデータ読み込み機能の実装が完了しました。以下の機能が実装されています：

1. **データ読み込み機能**
   - CSVファイルの読み込み
   - チャンク読み込みによる大規模データの効率的な処理
   - 全データ一括読み込み機能
   - ヘッダー情報の解析

2. **データ表示機能**
   - 2次元ヒートマップによる可視化
   - カラーマップの選択（plasmaがデフォルト）
   - 線形/対数スケールの切り替え

3. **インタラクティブ操作**
   - マウスドラッグによる領域選択と拡大
   - 表示範囲の調整
   - リアルタイムデータ値表示

## 最近の変更点

1. **プロジェクト構造の確立**
   - MVCパターンを採用したディレクトリ構造の作成
   - 各コンポーネントの実装
   - メモリーバンクの設定

2. **基本機能の実装**
   - データローダーの実装
   - GUIコンポーネントの実装
   - データ処理機能の実装

3. **フィルタリングUIの改善**
   - スライダーをドロップダウンと入力フィールドに置き換え
   - 数値列と非数値列の両方に対応
   - 複数の値でのフィルタリングに対応
   - 範囲指定によるフィルタリング機能の追加
   - 複数条件の組み合わせに対応

4. **Windows用exeビルド機能の追加**
   - GitHub Actionsを使用した自動ビルド
   - PyInstallerによる単一バイナリ生成
   - アイコンファイルの設定
   - PRマージ時の自動リリース作成

5. **データ処理の最適化**
   - `get_heatmap_data()`のNumPy処理をベクトル化して高速化
   - キャッシュ機能を追加して計算結果を再利用
   - フィルタリング処理の最適化
   - 大規模データセット（9万行程度）の処理速度向上

## 次のステップ

1. **機能拡張**
   - データエクスポート機能の強化
   - バッチ処理機能の検討

2. **パフォーマンス最適化**
   - 大規模データ処理の最適化
   - メモリ使用量の最適化
   - 描画パフォーマンスの改善

3. **ユーザビリティ向上**
   - フィルタリングUIの改善
   - エラー処理の強化
   - ユーザーインターフェースの改善
   - ドキュメントの整備

## 現在の課題

1. **パフォーマンス課題**
   - 大規模データセット処理時のメモリ使用量
   - 表示更新時のレスポンス
   - データ読み込み時の処理時間

2. **ユーザビリティ課題**
   - エラーメッセージの改善
   - 操作性の向上
   - ヘルプ機能の追加

## 最近の変更点

1. **ファイル形式の自動認識機能の改善**
   - 各ローダーを順に試す方式に変更
   - try-exceptを使用して各ローダーを順番に試し、成功したローダーを使用
   - すべての形式で失敗した場合は明示的なエラーメッセージを表示
   - pandas.read_csvの'errors'パラメータを削除（互換性のため）

2. **1次元断面プロット機能の実装**
   - コントロールパネルに断面表示モードを追加
   - 別ウィンドウでの断面プロット表示
   - X軸・Y軸方向の断面データ表示
   - クリックした点の近傍データを使用
   - matplotlibのツールバーによるズーム・パン機能

3. **1次元断面プロット機能のバグ修正**
   - PlotControllerクラスに不足していたProfileWindowのインポートを追加
   - 断面表示モードでのクリック時のエラーを修正

4. **Zoom機能の改善**
   - 独自実装のZoom機能を削除し、matplotlibの標準ズーム機能に統一
   - matplotlibのズーム操作後にコントロールパネルの表示を更新する機能を追加
   - UIの一貫性を向上

## 次回のマイルストーン

1. **データエクスポート機能の強化**
   - 選択領域のエクスポート
   - 画像エクスポート
   - バッチエクスポート
